"use strict";function _createForOfIteratorHelper(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0,t=function(){};return{s:t,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){c=!0,r=e},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw r}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function basket_el_count(){var t=document.querySelector("#basket-el-count");setInterval(function(){var e=document.querySelectorAll(".basket-product");0<e.length?(t.style.display="block",t.textContent=e.length):t.style.display="none"},100)}function basket_req(){var e="https://jsonplaceholder.typicode.com/users";var t=document.querySelector("#basket-phone"),n=document.querySelector("#basket-name"),o=document.querySelector("#basket-mail"),r={name:String,phone_number:String,mail:String};function a(){r.name=n.value,r.phone_number=t.value,r.mail=o.value,function(o,r,e){var a=2<arguments.length&&void 0!==e?e:null;return new Promise(function(e,t){var n=new XMLHttpRequest;n.open(o,r),n.responseType="json",n.setRequestHeader("Content-Type","application/json"),n.onload=function(){(400<=n.status?t:e)(n.response)},n.onerror=function(){t(n.response)},n.send(JSON.stringify(a))})}("POST",e,r).then(function(e){return console.log(e)}).catch(function(e){console.log(e)})}var c=document.querySelector("#basket-modal");c.addEventListener("submit",function(e){e.preventDefault(),0===function(){var n=0,e=c.querySelectorAll("._req"),t=c.querySelectorAll(".basket-product");e.forEach(function(e,t){e.nextElementSibling.classList.remove("_error"),""===e.value&&(e.nextElementSibling.classList.add("_error"),n++)}),t.length<1&&(n++,modal_ok("выберите курс"));return n}()&&(a(),c.querySelectorAll("input").forEach(function(e,t){e.value="",e.nextElementSibling.classList.remove("basket-inp_focus")}),function(){var e=c.querySelectorAll(".basket-product"),n=c.querySelector(".basket-slider-list"),t=document.querySelector("#basket-form__all-price");e.forEach(function(e,t){n.removeChild(e)}),all_price=0,t.innerHTML="".concat(all_price," ₽")}())})}function basket_modal(){var t=document.querySelector(".basket-modal"),n=t.querySelector(".basket-form"),e=t.querySelector(".basket-remove"),o=document.querySelector("#basket"),r=t.querySelectorAll("input");function a(){n.style.transform="translateX(200%)",setTimeout(function(){t.classList.remove("basket-modal_active")},400),t.classList.contains("basket-modal_active")&&(document.querySelector("body").style.overflow="auto")}o.addEventListener("click",function(e){t.classList.add("basket-modal_active"),setTimeout(function(){n.style.transform="translateX(0%)"},400),t.classList.contains("basket-modal_active")&&(document.querySelector("body").style.overflow="hidden")}),e.addEventListener("click",function(e){a()}),window.onclick=function(e){e.target!=t&&e.target!=t.querySelector(".container")||a()},r.forEach(function(t,e){t.onfocus=function(e){e.target.nextElementSibling.classList.add("basket-inp_focus")},t.onblur=function(e){""!=t.value&&" "!=t.value||e.target.nextElementSibling.classList.remove("basket-inp_focus")}})}basket_el_count(),basket_req(),basket_modal();var all_price=0;function addCourses(){document.addEventListener("DOMContentLoaded",function(){var a=new Splide("#basket-slider",{pagination:!1,classes:{arrows:"basket-arrows",prev:"basket-arrows__prev",next:"basket-arrows__next"}}).mount(),c=document.querySelector("#basket-slider"),e=document.querySelectorAll(".buy"),s=(document.querySelector(".basket-slider-list"),document.querySelector("#basket-form__all-price"));e.forEach(function(e,t){e.onclick=function(e){var e=e.target.parentNode,n=e.querySelector(".course-card__title").textContent,t=e.querySelector(".card-price").textContent,o=e.querySelector(".card-img").getAttribute("src"),e=c.querySelectorAll(".basket-product__name"),r=!0;e.forEach(function(e,t){if(e.textContent==n)return r=!1}),r?(a.add('<li class="splide__slide basket-product">\n               <div class="basket-product__logo">\n                <img src="'.concat(o,'"/>\n               </div>\n               <div class="basket-product__box">\n                <div class="basket-product__name">').concat(n,'</div>\n                <div class="basket-product__price">').concat(t," ₽</div>\n               </div>\n            </li>")),all_price+=Number(t),s.innerHTML="".concat(all_price," ₽")):l=!0}});var l=!1;setInterval(function(){l&&(modal_ok("Этот элемент уже в корзине"),l=!1)},100)})}function contact__req(){var e="http://www.sinica-artplace.ru/contact_us/leave_request/";var t={name:String,phone_number:String};function n(){t.name=a.value,t.phone_number=r.value,function(o,r,e){var a=2<arguments.length&&void 0!==e?e:null;return new Promise(function(e,t){var n=new XMLHttpRequest;n.open(o,r),n.responseType="json",n.setRequestHeader("Content-Type","application/json"),n.onload=function(){400<=n.status?t(n.response):(e(n.response),modal_ok(n.response.message))},n.onerror=function(){t(n.response)},n.send(JSON.stringify(a))})}("POST",e,t).then(function(e){return console.log(e)}).catch(function(e){console.log(e)})}var o=document.querySelector(".form-call"),r=document.querySelector("#s_contact-phone"),a=document.querySelector("#s_contact-name");o.addEventListener("submit",function(e){e.preventDefault(),0===function(){var n=0;return o.querySelectorAll("._req").forEach(function(e,t){e.style.boxShadow="none",""===e.value&&(e.style.boxShadow="0em 0em 0.2em 0.15em red",n++)}),n}()&&(n(),o.querySelectorAll("input").forEach(function(e,t){e.value="",e.nextElementSibling.classList.remove("form-call_focus")}))})}function hamburger(){var n=document.querySelector(".hamburger"),e=document.querySelector(".hamburger-menu"),t=document.querySelectorAll(".hamburger-menu__list__el"),o=document.querySelector(".header").querySelector(".btn");n.onclick=function(){n.classList.toggle("active-burger")},setInterval(function(){n.classList.contains("active-burger")?(o.classList.add("blur"),e.classList.add("hamburger-menu_active")):(o.classList.remove("blur"),e.classList.remove("hamburger-menu_active"))},100),t.forEach(function(e,t){e.onclick=function(){n.classList.remove("active-burger")}})}function header_fix(){var e=document.querySelector(".header");window.onscroll=function(){200<window.pageYOffset?e.classList.add("header_fixed"):e.classList.remove("header_fixed")}}function about_slider(){document.addEventListener("DOMContentLoaded",function(){new Splide("#about_slider",{type:"fade",perPage:1,lazyLoad:"nearby",rewind:!0}).mount()})}function modal_contact(){var t=document.querySelector(".modal-window"),n=t.querySelector(".modal-window__contact"),e=t.querySelector(".remove-btn"),o=document.querySelector("#contact-btn"),r=t.querySelectorAll("input");function a(){n.style.transform="translateY(-100%)",setTimeout(function(){t.classList.remove("modal-contact_active")},400),t.classList.contains("modal-contact_active")&&o.classList.remove("contact-title_active")}o.addEventListener("click",function(e){t.classList.add("modal-contact_active"),setTimeout(function(){n.style.transform="translateY(-5%)"},400),t.classList.contains("modal-contact_active")&&o.classList.add("contact-title_active")}),e.addEventListener("click",function(e){a()}),t.onclick=function(e){e.target===n&&a()},r.forEach(function(t,e){t.onfocus=function(e){e.target.nextElementSibling.classList.add("form-call_focus"),t.style.boxShadow="0em 0em 0.2em 0.15em #F8AF00"},t.onblur=function(e){""!=t.value&&" "!=t.value||(e.target.nextElementSibling.classList.remove("form-call_focus"),t.style.boxShadow="none")}})}function s_courses_slider(){var t=0,o=3,e=document.querySelector(".courses"),n=document.querySelector(".courses__list"),r=document.querySelectorAll(".courses__el"),a=document.querySelector(".courses-slider__btns_next"),c=document.querySelector(".courses-slider__btns_prev"),s=e.clientWidth/o,l=+s,i=r.length;function u(){n.style.transform="translateX(".concat(t,"px)")}function d(){c.disabled=0===t,a.disabled=t<=-(i-o)*s,a.disabled?a.classList.add("blur-btn"):a.classList.remove("blur-btn"),c.disabled?c.classList.add("blur-btn"):c.classList.remove("blur-btn")}r.forEach(function(e,t){e.style.minWidth="".concat(s,"px")}),a.addEventListener("click",function(){var e;e=i-(Math.abs(t)+o*s)/s,t-=1<=e?l:e*s,u(),d()}),c.addEventListener("click",function(){var e;e=Math.abs(t)/s,t+=1<=e?l:e*s,u(),d()}),d();setInterval(function(){s!=e.clientWidth/o&&(t=0,u()),s=e.clientWidth/o,r.forEach(function(e,t){e.style.minWidth="".concat(s,"px")}),l=+s,d()},100);var m=!0,f=!1,v=!1;setInterval(function(){m&&(o=3),f&&(o=2),v&&(o=1);var e=window.matchMedia("(min-width: 1024px)"),t=window.matchMedia("(max-width: 1024px)"),n=window.matchMedia("(max-width: 860px)");e.matches&&(m=!(f=v=!1),y(3)),t.matches&&(f=!(v=m=!1),y(2)),n.matches&&(v=!(f=m=!1),y(1))},100);function y(e){i<=e?(a.style.display="none",c.style.display="none",n.style.justifyContent="space-around"):(a.style.display="flex",c.style.display="flex",n.style.justifyContent="normal")}}function s_courses_card_flip(){document.querySelectorAll(".courses-flip__btn").forEach(function(t,e){t.addEventListener("click",function(e){t.parentNode.parentNode.parentNode.classList.toggle("card-active")})})}function slider_type(){var e=document.querySelector("#courses-slider-type"),t=document.querySelector(".courses"),n=document.querySelectorAll(".course-card"),o=document.querySelectorAll(".hover-style__btn");function r(){e.checked?t.classList.remove("hover-type"):t.classList.add("hover-type")}e.addEventListener("click",function(e){n.forEach(function(e,t){e.classList.remove("card-active")}),r()}),o.forEach(function(t,e){t.addEventListener("click",function(e){t.parentNode.classList.toggle("hover-style_active")})}),window.matchMedia("(max-width: 860px)").matches?e.checked=!1:e.checked=!0,r()}function reviews_slider(){document.addEventListener("DOMContentLoaded",function(){var e=new Splide("#reviews_slider",{perPage:2,pagination:!1,classes:{arrows:"reviews-btns",prev:"reviews-btns__prev",next:"reviews-btns__next"}}).mount();window.matchMedia("(max-width: 860px)").matches?e.options={perPage:1,pagination:!0}:e.options={perPage:2,pagination:!1}});var e=document.querySelector("#reviews_slider");e.querySelector(".reviews-btns__next"),e.querySelector(".reviews-btns__prev")}function anchors(){var e,t=_createForOfIteratorHelper(document.querySelectorAll("a[href*='#']"));try{for(t.s();!(e=t.n()).done;)!function(){var t=e.value;t.addEventListener("click",function(e){e.preventDefault();e=t.getAttribute("href");document.querySelector(""+e).scrollIntoView({behavior:"smooth",block:"start"})})}()}catch(e){t.e(e)}finally{t.f()}}function init(){var e=new ymaps.Map("map",{center:[59.915585,30.317665],zoom:13,controls:["zoomControl"],behaviors:["drag"]}),t=new ymaps.Placemark([59.915585,30.317665],{balloonContent:"Московский поспект, 25/1, Санкт-Петербург"});e.geoObjects.add(t)}function modal_ok(e){var t=document.querySelector(".modal_ok"),n=t.querySelector(".btn"),o=t.querySelector(".title");function r(){t.classList.remove("modal_ok_active"),o.textContent=""}t.classList.add("modal_ok_active"),o.textContent=e,n.addEventListener("click",function(e){r()}),window.onclick=function(e){e.target!=o&&e.target!=t&&r()}}function preloading(){window.onload=function(){document.querySelector(".loader").style.display="none"}}addCourses(),contact__req(),hamburger(),header_fix(),about_slider(),modal_contact(),s_courses_slider(),s_courses_card_flip(),slider_type(),reviews_slider(),anchors(),ymaps.ready(init);var preloader=document.querySelector(".loader");preloader.style.display="none";